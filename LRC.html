<!DOCTYPE html>
<html>
<hr>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
		<title>zrs之家</title>
		<script src="js/jquery.js"></script>
		<style>
			div{
				width:340px;
				height:500px;
				margin:0 auto;
				overflow:hidden;
			}
			ul{
				transition-duration: 600ms;
			}
			ul, li{
				list-style:none;
				padding: 0;
				margin: 0;
			}
			li.on{
				color: red;
			}
			p{
				overflow: hidden;
				text-overflow: ellipsis;
				height: 20px;
				line-height: 20px;
				-webkit-line-clamp: 1;
				-webkit-box-orient: vertical;
				display: -webkit-box;
				text-align: center;
				margin-top: 0;
				margin-bottom: 20px;
			}
			audio{
				margin-top: 10px;
			}
		</style>
	</head>
	<body>
		<div>
			<ul id="lrclist" style="transform: translateY(350px);">
				
			</ul>
		</div>
		<audio id="audio" src="网站源文件/Vancouver Sleep Clinic - Someone To Stay.mp3" controls="controls" autoplay="true"></audio>
		
		<script>
		var lrcJSON = {
"[00:04.13]":"You were alone left out in the cold",
"[00:08.23]":"Clinging to the ruin of your broken home",
"[00:12.49]":"Too lost and hurting to carry your load",
"[00:17.09]":"We all need someone to hold",
"[00:30.01]":"You've been fighting the memory on your own",
"[00:34.45]":"Nothing worsens nothing grows",
"[00:38.80]":"I know how it feels being by yourself in the rain",
"[00:43.45]":"We all need someone to stay",
"[00:52.63]":"We all need someone to stay",
"[00:56.21]":"Hear you falling and lonely cry out",
"[01:00.52]":"Will you fix me up will you show me hope",
"[01:05.33]":"At the end of the day you were helpless",
"[01:09.32]":"Can you keep me close can you love me most",
"[01:18.55]":"You've drunk it down and you've spat it out",
"[01:22.82]":"And nothing tastes like the things you had",
"[01:27.21]":"So turn it off why don't you let them go",
"[01:31.75]":"We all need someone to stay",
"[01:41.10]":"We all need someone to stay",
"[01:44.56]":"Hear you falling and lonely cry out",
"[01:48.99]":"Will you fix me up will you show me hope",
"[01:53.69]":"At the end of the day we're helpless",
"[01:57.77]":"Can you keep me close can you love me most",
"[02:06.84]":"Can you keep me close can you love me most",
"[02:15.67]":"Can you keep me close can you love me most",
"[02:29.44]":"You were alone left out in the cold",
"[02:33.53]":"Clinging to the ruin of your broken home",
"[02:37.72]":"You were falling and lonely cry out",
"[02:41.76]":"Will you fix me up will you show me hope",
"[02:46.53]":"The end of the day and we're helpless",
"[02:50.62]":"Can you keep me close can you love me",
"[03:13.00]":"Hear you falling and lonely cry out",
"[03:17.20]":"Will you fix me up will you show me hope",
"[03:21.73]":"At the end of the day we're helpless",
"[03:25.76]":"Can you keep me close can you love me most",
"[03:34.81]":"Can you keep me close can you love me most",
"[03:43.79]":"Can you keep me close can you love me most",
	};
		
		
		var lrcTime = [];
		var ul = $("#lrclist")[0];
		
		var i = 0;
		$.each(lrcJSON, function(key, value) {
			lrcTime[i++] = parseFloat(key.substr(1,3)) * 60 + parseFloat(key.substring(4,10));
			ul.innerHTML += "<li><p>"+lrcJSON[key]+"</p></li>";
		});
		lrcTime[lrcTime.length] = lrcTime[lrcTime.length-1] + 3;
		
		
		var $li = $("#lrclist>li");
		
		var currentLine = 0;
		var currentTime;
		var audio = document.getElementById("audio");
		var ppxx;
		
		audio.ontimeupdate = function() {
			currentTime = audio.currentTime;
			for (j=currentLine, len=lrcTime.length; j<len; j++){
				if (currentTime<lrcTime[j+1] && currentTime>lrcTime[j]){
					currentLine =  j;
					ppxx = 250-(currentLine*32);
					ul.style.transform = "translateY("+ppxx+"px)";
					$li.get(currentLine-1).className="";
					console.log("on"+currentLine);
					$li.get(currentLine).className="on";
					break;
				}
			}
		};
		
		audio.onseeked = function() {
			currentTime = audio.currentTime;
			console.log("  off"+currentLine);
			$li.get(currentLine).className="";
			for (k=0, len=lrcTime.length; k<len; k++){
				if (currentTime<lrcTime[k+1] && currentTime<lrcTime[k]){
					currentLine =  k;
					break;
				}
			}
		};
		
		</script>
	</body>
</html>